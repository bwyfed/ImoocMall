<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>axios使用示例</title>
  <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
  <script src="../node_modules/vue/dist/vue.js"></script>
  <script src="../node_modules/axios/dist/axios.js"></script>
</head>
<body>
<div id="app">
  <h1>axios插件讲解</h1>
  <a href="javascript:void(0)" class="btn btn-primary" v-on:click="get">Get请求</a>
  <a href="javascript:void(0)" class="btn btn-primary" v-on:click="post">Post请求</a>
  <a href="javascript:void(0)" class="btn btn-primary" v-on:click="http">HTTP请求</a>
  <div>
    <span>{{msg}}</span>
  </div>
</div>
<script>
  new Vue({
    el: "#app",
    data: {
      msg: ''
    },
    mounted: function() {
        axios.interceptors.request.use(function (config) {
          console.log("request init.");
          return config;
        });
        axios.interceptors.response.use(function(response){
            console.log("response init.");
            return response;
        })
    },

    methods: {
      get: function() {
        axios.get("../package.json",{
            params: {
                userId: "999"
            },
            headers: {
                token: "jack"
            }
        })
          .then(res=>{
            this.msg = res.data;
          }).catch(error=>{
              console.log("error init:"+error);
        })
      },
      post: function() {
          axios.post("../package.json",{
              userId: 888
          },{
              headers: {
                  token: "tom"
              }
          }).then(res=>{
              this.msg = res.data;
          }).catch(error=>{

          })
      },

      http: function() {
          axios({
            url: "../package.json",
            method: "get",
            params: {
                userId: "101"
            },
            headers: {
                token: "http-test"
            }
          }).then(res=>{
              this.msg = res.data;
          })
      }
    }
  })
</script>
</body>
</html>
